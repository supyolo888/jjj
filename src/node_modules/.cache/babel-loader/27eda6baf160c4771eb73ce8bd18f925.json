{"ast":null,"code":"var playbtn = document.querySelectorAll('.playbtn');\nvar video = document.querySelectorAll('.video');\nvar play = document.querySelectorAll('.play');\n\nvar _loop = function _loop(i) {\n  playbtn[i].onclick = function () {\n    if (video[i].paused) {\n      for (var n = 0; n < video.length; n++) {\n        video[n].pause();\n        play[n].classList.remove(\"none\");\n      }\n\n      video[i].play();\n      play[i].classList.add(\"none\");\n    } else {\n      video[i].pause();\n      play[i].classList.remove(\"none\");\n    }\n  };\n};\n\nfor (var i = 0; i < video.length; i++) {\n  _loop(i);\n}\n\n;\n\nvar _loop2 = function _loop2(_i) {\n  $(window).on('scroll resize', function () {\n    // ウインドウのスクロール量取得\n    var windowScrollTop = $(window).scrollTop(); // ウインドウの高さ取得\n\n    var windowInnerHeight = window.innerHeight; // videoがページの最上部からどの位置にあるか取得\n\n    var videoTop = video[_i].getBoundingClientRect(); // videoの高さ取得\n\n\n    var videoHeight = video[_i].innerHeight(); // videoが再生中、かつ画面外に出た場合、停止処理\n\n\n    if (!video[_i].paused && (windowScrollTop + windowInnerHeight < videoTop || windowScrollTop > videoTop + videoHeight)) {\n      video[_i].pause();\n    }\n  }).trigger('scroll');\n};\n\nfor (var _i = 0; _i < video.length; _i++) {\n  _loop2(_i);\n}","map":{"version":3,"sources":["/app/app/javascript/micropost/video.js"],"names":["playbtn","document","querySelectorAll","video","play","i","onclick","paused","n","length","pause","classList","remove","add","$","window","on","windowScrollTop","scrollTop","windowInnerHeight","innerHeight","videoTop","getBoundingClientRect","videoHeight","trigger"],"mappings":"AAAA,IAAIA,OAAO,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,CAAd;AACA,IAAIC,KAAK,GAAGF,QAAQ,CAACC,gBAAT,CAA0B,QAA1B,CAAZ;AACA,IAAIE,IAAI,GAAGH,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAX;;2BAESG,C;AACPL,EAAAA,OAAO,CAACK,CAAD,CAAP,CAAWC,OAAX,GAAqB,YAAW;AAC9B,QAAIH,KAAK,CAACE,CAAD,CAAL,CAASE,MAAb,EAAqB;AACnB,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,KAAK,CAACM,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCL,QAAAA,KAAK,CAACK,CAAD,CAAL,CAASE,KAAT;AACAN,QAAAA,IAAI,CAACI,CAAD,CAAJ,CAAQG,SAAR,CAAkBC,MAAlB,CAAyB,MAAzB;AACC;;AACDT,MAAAA,KAAK,CAACE,CAAD,CAAL,CAASD,IAAT;AACAA,MAAAA,IAAI,CAACC,CAAD,CAAJ,CAAQM,SAAR,CAAkBE,GAAlB,CAAsB,MAAtB;AACH,KAPD,MAOO;AACHV,MAAAA,KAAK,CAACE,CAAD,CAAL,CAASK,KAAT;AACAN,MAAAA,IAAI,CAACC,CAAD,CAAJ,CAAQM,SAAR,CAAkBC,MAAlB,CAAyB,MAAzB;AACH;AACF,GAZD;;;AADF,KAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACM,MAA1B,EAAkCJ,CAAC,EAAnC,EAAuC;AAAA,QAA9BA,CAA8B;AActC;;AAAA;;6BAEQA,E;AACTS,EAAAA,CAAC,CAACC,MAAD,CAAD,CACKC,EADL,CACQ,eADR,EACyB,YAAY;AAC7B;AACA,QAAIC,eAAe,GAAGH,CAAC,CAACC,MAAD,CAAD,CAAUG,SAAV,EAAtB,CAF6B,CAG7B;;AACA,QAAIC,iBAAiB,GAAGJ,MAAM,CAACK,WAA/B,CAJ6B,CAK7B;;AACA,QAAIC,QAAQ,GAAGlB,KAAK,CAACE,EAAD,CAAL,CAASiB,qBAAT,EAAf,CAN6B,CAO7B;;;AACA,QAAIC,WAAW,GAAGpB,KAAK,CAACE,EAAD,CAAL,CAASe,WAAT,EAAlB,CAR6B,CAU7B;;;AACA,QAAI,CAACjB,KAAK,CAACE,EAAD,CAAL,CAASE,MAAV,KAAsBU,eAAe,GAAGE,iBAAlB,GAAsCE,QAAvC,IAAqDJ,eAAe,GAAGI,QAAQ,GAAGE,WAAvG,CAAJ,EAA0H;AACtHpB,MAAAA,KAAK,CAACE,EAAD,CAAL,CAASK,KAAT;AACH;AACJ,GAfL,EAgBKc,OAhBL,CAgBa,QAhBb;;;AADA,KAAK,IAAInB,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGF,KAAK,CAACM,MAA1B,EAAkCJ,EAAC,EAAnC,EAAuC;AAAA,SAA9BA,EAA8B;AAkBtC","sourcesContent":["var playbtn = document.querySelectorAll('.playbtn');\nvar video = document.querySelectorAll('.video');\nvar play = document.querySelectorAll('.play');\n\nfor (let i = 0; i < video.length; i++) {\n  playbtn[i].onclick = function() {\n    if (video[i].paused) {\n      for (let n = 0; n < video.length; n++) {\n        video[n].pause();\n        play[n].classList.remove(\"none\");\n        }\n        video[i].play();\n        play[i].classList.add(\"none\");\n    } else {\n        video[i].pause();\n        play[i].classList.remove(\"none\");\n    }\n  };\n};\n\nfor (let i = 0; i < video.length; i++) {\n$(window)\n    .on('scroll resize', function () {\n        // ウインドウのスクロール量取得\n        var windowScrollTop = $(window).scrollTop();\n        // ウインドウの高さ取得\n        var windowInnerHeight = window.innerHeight;\n        // videoがページの最上部からどの位置にあるか取得\n        var videoTop = video[i].getBoundingClientRect();\n        // videoの高さ取得\n        var videoHeight = video[i].innerHeight();\n\n        // videoが再生中、かつ画面外に出た場合、停止処理\n        if (!video[i].paused && ((windowScrollTop + windowInnerHeight < videoTop) || (windowScrollTop > videoTop + videoHeight))) {\n            video[i].pause();\n        }\n    })\n    .trigger('scroll');\n}\n"]},"metadata":{},"sourceType":"module"}